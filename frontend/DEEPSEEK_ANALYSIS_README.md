# DeepSeek分析功能

## 功能概述

在股票每日数据明细页面中，用户可以通过点击DeepSeek分析按钮获取AI生成的股票分析报告，支持Markdown格式的详细分析内容展示。

## 功能特性

### 1. AI智能分析
- 基于DeepSeek AI模型生成股票分析报告
- 包含基础信息、技术分析、基本面分析等
- 实时获取最新的分析结果

### 2. Markdown渲染
- 支持完整的Markdown语法渲染
- 自定义样式，美观易读
- 支持表格、代码块、引用等格式

### 3. 用户界面
- 在股票名称行添加机器人图标按钮
- 点击后弹出分析报告模态框，包含两个Tab
- 支持个股分析和走势分析两种模式
- 支持加载状态和错误处理

## 使用方法

### 1. 进入股票每日数据页面
- 访问"股票每日数据"页面
- 搜索或选择要查看的股票

### 2. 获取DeepSeek分析
- 在股票名称行找到机器人图标按钮
- 点击"DeepSeek分析"按钮
- 系统会自动调用AI分析接口
- 分析完成后在模态框中显示结果

### 3. 查看分析报告
- 模态框包含两个Tab：个股分析和走势分析
- 个股分析：包含基础信息、技术分析、投资建议等
- 走势分析：包含K线走势、技术指标、趋势预测等
- 分析报告以Markdown格式展示
- 支持滚动查看完整内容

## API接口

### 获取股票基础信息分析
```
GET /api/deepseek_analysis/stock/basic_info/{ts_code}
```

### 获取股票走势分析
```
GET /api/deepseek/stock/daily/{ts_code}
```

### 响应格式
```json
{
  "code": 200,
  "message": "success",
  "data": {
    "analysis": "# 股票分析报告\n\n## 基本信息\n\n- 股票代码：000001.SZ\n- 公司名称：平安银行\n- 行业分类：银行\n\n## 技术分析\n\n### 当前趋势\n\n根据最新数据，该股票呈现...\n\n## 投资建议\n\n基于综合分析，建议..."
  }
}
```

## 技术实现

### 前端实现
1. **API模块**: 创建`deepseekApi.js`服务模块
2. **Markdown渲染**: 使用`react-markdown`库渲染内容
3. **自定义组件**: 创建`MarkdownRenderer`组件
4. **Tab功能**: 支持个股分析和走势分析两个Tab
5. **状态管理**: 管理分析数据和加载状态

### 组件结构
- `deepseekApi.js`: API服务模块
- `MarkdownRenderer.js`: Markdown渲染组件
- `StockDailyDetailTable.js`: 集成分析功能和Tab切换

### 样式定制
- 标题使用Ant Design的Typography组件
- 代码块使用自定义样式
- 表格使用边框和背景色
- 引用块使用左边框样式

## 支持的Markdown语法

### 1. 标题
```markdown
# 一级标题
## 二级标题
### 三级标题
```

### 2. 文本格式
```markdown
**粗体文本**
*斜体文本*
`行内代码`
```

### 3. 列表
```markdown
- 无序列表项
1. 有序列表项
```

### 4. 代码块
```markdown
```javascript
console.log('代码块');
```
```

### 5. 引用
```markdown
> 这是一个引用块
```

### 6. 表格
```markdown
| 列1 | 列2 | 列3 |
|-----|-----|-----|
| 数据1 | 数据2 | 数据3 |
```

## 用户体验

### 1. 操作流程
1. 用户点击"DeepSeek分析"按钮
2. 系统显示加载状态
3. 并行调用个股分析和走势分析接口
4. 任何一个分析完成即可展示结果
5. 在模态框中展示结果，支持Tab切换

### 2. 错误处理
- 网络错误时显示错误提示
- 分析失败时显示友好提示
- 支持重试操作

### 3. 视觉反馈
- 按钮有hover效果和tooltip提示
- 加载状态显示loading动画
- 模态框支持滚动查看

## 注意事项

1. **网络依赖**: 需要稳定的网络连接
2. **API限制**: 可能有调用频率限制
3. **内容质量**: 分析结果仅供参考
4. **数据时效**: 分析基于实时数据
5. **超时设置**: API超时时间设置为1分钟
6. **异步加载**: 任何一个分析完成即可展示，无需等待全部完成

## 后续优化

1. **缓存机制**: 缓存分析结果，避免重复请求
2. **多维度分析**: 支持技术分析、基本面分析等
3. **历史对比**: 支持历史分析结果对比
4. **个性化**: 根据用户偏好定制分析内容
5. **导出功能**: 支持导出分析报告为PDF

## 依赖安装

```bash
npm install react-markdown
```

## 文件结构

```
src/
├── api/
│   └── deepseekApi.js          # DeepSeek API服务
├── components/
│   ├── MarkdownRenderer.js      # Markdown渲染组件
│   └── StockDailyDetailTable.js # 股票表格组件（已集成）
└── pages/
    └── StockDailyDetailPage.js  # 股票每日数据页面
``` 