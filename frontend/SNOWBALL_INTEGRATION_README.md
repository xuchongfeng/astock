# 雪球分组集成功能

## 功能概述

在股票每日数据明细页面中，用户可以直接将股票收藏到雪球分组中，支持同时添加到多个分组。

## 功能特性

### 1. 快速收藏
- 在股票名称行添加了"收藏到雪球分组"按钮
- 点击后弹出分组选择模态框
- 支持多选分组同时添加

### 2. 分组管理
- 自动获取用户的雪球分组列表
- 显示分组名称和描述信息
- 支持滚动查看所有分组

### 3. 批量操作
- 可以同时选择多个分组
- 一次性将股票添加到所有选中的分组
- 操作完成后显示成功提示

## 使用方法

### 1. 进入股票每日数据页面
- 访问"股票每日数据"页面
- 搜索或选择要查看的股票

### 2. 收藏到雪球分组
- 在股票名称行找到文件夹图标按钮
- 点击"收藏到雪球分组"按钮
- 在弹出的模态框中选择要添加的分组
- 可以勾选多个分组
- 点击"确定"完成添加

### 3. 查看结果
- 操作成功后会在雪球页面看到添加的股票
- 可以在雪球分组中管理这些股票

## 界面元素

### 股票名称行按钮
- **收藏到自选股**: 星形图标，添加到自选股列表
- **收藏到雪球分组**: 文件夹图标，添加到雪球分组
- **添加评论**: 消息图标，添加股票评论

### 分组选择模态框
- 显示所有可用的雪球分组
- 每个分组显示名称和描述
- 支持多选操作
- 滚动查看所有分组

## API接口

### 获取分组列表
```
GET /api/snowball/groups
```

### 添加股票到分组
```
POST /api/snowball/groups/{group_id}/stocks
```

请求体：
```json
{
  "stock_code": "000001.SZ",
  "group_name": "分组名称",
  "note": "从股票每日数据页面添加"
}
```

## 技术实现

### 前端实现
1. **按钮集成**: 在股票名称行添加文件夹图标按钮
2. **模态框**: 使用Ant Design的Modal组件显示分组选择
3. **多选支持**: 使用Checkbox.Group实现多选功能
4. **批量操作**: 使用Promise.all实现并发添加

### 状态管理
- `snowballModal`: 控制模态框显示状态
- `snowballGroups`: 存储分组列表数据
- `selectedGroups`: 存储选中的分组ID
- `snowballLoading`: 控制加载状态

## 用户体验

### 1. 操作流程
1. 用户点击"收藏到雪球分组"按钮
2. 系统自动获取用户的分组列表
3. 用户选择要添加的分组（可多选）
4. 点击确定完成添加
5. 显示操作结果提示

### 2. 错误处理
- 网络错误时显示错误提示
- 未选择分组时提示用户选择
- 添加失败时显示具体错误信息

### 3. 视觉反馈
- 按钮有hover效果和tooltip提示
- 加载状态显示loading动画
- 操作成功/失败有明确的提示信息

## 注意事项

1. **用户登录**: 需要用户登录才能使用此功能
2. **分组权限**: 只能添加到用户自己的分组
3. **重复添加**: 系统会自动处理重复添加的情况
4. **网络状态**: 需要稳定的网络连接

## 后续优化

1. **智能推荐**: 根据股票特征推荐合适的分组
2. **快速分组**: 支持创建新分组并添加
3. **批量操作**: 支持批量选择多只股票同时添加
4. **分组预览**: 显示分组中已有的股票数量
5. **操作历史**: 记录添加历史，支持撤销操作 